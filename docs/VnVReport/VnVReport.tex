\documentclass[12pt, titlepage]{article}

\usepackage{fullpage}
\usepackage[round]{natbib}
\usepackage{multirow}
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{graphicx}
\usepackage{float}
\usepackage{hyperref}
\usepackage[shortlabels]{enumitem}
\usepackage{amsmath, mathtools}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{colortbl}
\usepackage{xr}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{siunitx}
\usepackage{caption}
\usepackage{pdflscape}
\usepackage{afterpage}
\usepackage{titlesec}
\usepackage{array}
\hypersetup{
    colorlinks,
    citecolor=blue,
    filecolor=black,
    linkcolor=red,
    urlcolor=blue
}
\usepackage{graphicx}
\graphicspath{ {./images/} }
\usepackage{caption}
\usepackage{enumitem}
\input{../Comments}
\input{../Common}

\begin{document}

\title{System Verification and Validation Report for \progname{}} 
\author{\authname}
\date{\today}
	
\maketitle

\pagenumbering{roman}

\section{Revision History}

\begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
\toprule {\bf Date} & {\bf Version} & {\bf Notes}\\
\midrule
2023-03-04 & Arshdeep Aujla & Added Template for Nonfunctional Requirements\\
2023-03-05 & Arshdeep Aujla & Added Table for functional requirements, traceability matrix\\
2023-03-07 & Jonathan Cels & Added functional requirement test reports\\
2023-03-08 & Joshua Chapman & Added changes due to testing, Trace to Modules\\
\bottomrule
\end{tabularx}

~\newpage

\section{Symbols, Abbreviations and Acronyms}

\renewcommand{\arraystretch}{1.2}
\begin{tabular}{l l} 
  \toprule		
  \textbf{symbol} & \textbf{description}\\
  \midrule 
  T & Test\\
  FSM & Finite State Machine\\
  \bottomrule
\end{tabular}\\

Refer to SRS Section 1 for an extensive list of used symbols, abbreviations, and acronyms.

\newpage

\tableofcontents

\listoftables %if appropriate

\listoffigures %if appropriate

\newpage

\pagenumbering{arabic}

This document ...

\section{Functional Requirements Evaluation}
Refer to the VnV Plan for descriptions of the tests derived to evaluate the functional requirements.
\subsection{Game Active State}

\begin{table}[H]
    \centering
        \setlength{\leftmargini}{0.4cm}
        \begin{tabular}{| >{\centering\arraybackslash}m{1cm} | 
            >{\centering\arraybackslash}m{2.5cm} | 
            >{\centering\arraybackslash}m{4cm} | 
            >{\centering\arraybackslash}m{3cm} |
            >{\centering\arraybackslash}m{3cm} |
            >{\centering\arraybackslash}m{1.5cm} |}
        \hline
        \rowcolor[gray]{0.9}
        Test & Input & Expected & Actual & Notes & Result\\
        \hline
        GA-1 & Draw/resign button pressed while game active. & System variable `gameInProgress' set to false. &  System variable configured correctly. &  & Pass \\
        \hline
        GA-2 & Start game button pressed while game active. & System variable `gameInProgress' remains true. &  System variable configured correctly. &  & Pass \\
        \hline
        GA-3 & User mode button pressed while game active. & System variable `currMode' changed to represent the selected user mode. &  User mode unchanged. & Design changed, user mode not switchable while a game is active. & Rework \\
        \hline
        GA-4 & Start game button pressed while game inactive. & System variable `gameInProgress' set to true, `currFEN' variable is set to the starting FEN. &  System variables configured correctly. &  & Pass \\
        \hline
        GA-5 & Move made that results in stalemate or checkmate according to the rules of chess while game inactive. & System variable `gameInProgress' set to false. &  System variable configured correctly. &  & Pass \\ 
        \hline
        \end{tabular}
    \caption{Active State Functional Requirements Results}
\end{table}

\subsection{Game Inactive State}

\begin{table}[H]
    \centering
        \setlength{\leftmargini}{0.4cm}
        \begin{tabular}{| >{\centering\arraybackslash}m{1cm} | 
            >{\centering\arraybackslash}m{2.5cm} | 
            >{\centering\arraybackslash}m{4cm} | 
            >{\centering\arraybackslash}m{3cm} |
            >{\centering\arraybackslash}m{3cm} |
            >{\centering\arraybackslash}m{1.5cm} |}
        \hline
        \rowcolor[gray]{0.9}
        Test & Input & Expected & Actual & Notes & Result\\
        \hline
        GI-1 & Start game button pressed while game inactive. & System variable `gameInProgress' set to true. & System variable configured correctly. &  & Pass \\
        \hline
        GI-2 & User mode button pressed while game inactive. & User mode unchanged. & System variable configured correctly. & Design changed, user mode is now switchable (only) while a game is inactive. & Rework \\
        \hline
        GI-3 & Draw/resign button pressed while game inactive. & System variable `gameInProgress' remains false. & System variable configured correctly. &  & Pass \\
        \hline
        GI-4 & Piece moved while game inactive. & System variable `currFEN' is unchanged. & System variable configured correctly. &  & Pass \\
        \hline
        GI-5 & Draw/resign button pressed, or move made that results in stalemate or checkmate according to the rules of chess while game active. & Game termination and winner are displayed on LCD screen. & Display updates correctly. &  & Pass \\
        \hline
        \end{tabular}
    \caption{Inactive State Functional Requirements Results}
\end{table}

\subsection{Normal Mode}

\begin{table}[H]
    \centering
        \setlength{\leftmargini}{0.4cm}
        \begin{tabular}{| >{\centering\arraybackslash}m{1cm} | 
            >{\centering\arraybackslash}m{2.5cm} | 
            >{\centering\arraybackslash}m{4cm} | 
            >{\centering\arraybackslash}m{3cm} |
            >{\centering\arraybackslash}m{3cm} |
            >{\centering\arraybackslash}m{1.5cm} |}
        \hline
        \rowcolor[gray]{0.9}
        Test & Input & Expected & Actual & Notes & Result\\
        \hline
        NB-1 & Piece moved while in normal mode. & Game state is updated to reflect piece movement. & Game state updated correctly. &  & Pass \\
        \hline
        NB-2 & Resign button pressed while in normal mode. & System variable `gameInProgress' set to false. & System variable configured correctly. &  & Pass \\
        \hline
        NB-3 & Draw button pressed while in normal mode. & System variable `gameInProgress' set to false. & System variable configured correctly. &  & Pass \\
        \hline
        ND-1 & Game state updated while in normal mode. & Updated game state is transmitted to the web application via Bluetooth. & Game state transmitted correctly. &  & Pass \\
        \hline
        NA-1 & Web application receives updated game state while in normal mode. & Update to game state is reflected on web application display. & Display updates correctly. &  & Pass \\
        \hline
        NA-2 & Game termination occurs while in normal mode. & Game termination and winner are displayed on web application display. & Display updates correctly. &  & Pass \\
        \hline
        \end{tabular}
    \caption{Normal Mode Functional Requirements Results}
\end{table}

\pagebreak
\subsection{Engine Mode}
    \begin{longtable}{| >{\centering\arraybackslash}m{1cm} | 
        >{\centering\arraybackslash}m{2.5cm} | 
        >{\centering\arraybackslash}m{4cm} | 
        >{\centering\arraybackslash}m{3cm} |
        >{\centering\arraybackslash}m{3cm} |
        >{\centering\arraybackslash}m{1.5cm} |}
    \hline
    \rowcolor[gray]{0.9}
    Test & Input & Expected & Actual & Notes & Result\\
    \hline
    EB-1 & Piece moved while in engine mode. & Game state is updated to reflect piece movement. & Game state updated correctly. &  & Pass \\
    \hline
    EB-2 & Resign button pressed while in engine mode. & System variable `gameInProgress' set to false. & System variable configured correctly. &  & Pass \\
    \hline
    EB-3 & Draw button pressed while in engine mode. & System variable `gameInProgress' set to false. & System variable configured correctly. &  & Pass \\
    \hline
    EB-4 & Engine moves transmitted from the web application to microcontroller. & Engine moves are displayed on the LCD screen. & Display updated correctly. &  & Pass \\
    \hline
    ED-1 & Game state updated while in engine mode. & Updated game state is transmitted to the web application via Bluetooth. & Game state transmitted correctly. &  & Pass \\
    \hline
    ED-2 & Engine moves are calculated by the web application. & Calculated engine moves are transmitted from the web application to the microcontroller via Bluetooth & Moves transmitted correctly. & Only one engine move currently calculated, more planned in future revisions. & Partial Pass \\
    \hline
    \pagebreak 
    \hline
    \rowcolor[gray]{0.9}
    Test & Input & Expected & Actual & Notes & Result\\
    \hline
    EA-1 & Web application receives updated game state while in engine mode. & Update to game state is reflected on web application display. & Display updates correctly. &  & Pass \\
    \hline
    EA-2 & Engine moves are calculated by the web application. & Calculated engine moves are displayed on web application display. & Engine moves are not displayed. & Not implemented, planned in future revisions. & TBD \\
    \hline
    EA-3 & Game termination occurs while in engine mode. & Game termination and winner are displayed on web application display. & Display updates correctly. &  & Pass \\
    \hline
    \caption{Engine Mode Functional Requirements Results}\\
\end{longtable}

\pagebreak

\subsection{Beginner Mode}
    \begin{longtable}{| >{\centering\arraybackslash}m{1cm} | 
        >{\centering\arraybackslash}m{2.5cm} | 
        >{\centering\arraybackslash}m{4cm} | 
        >{\centering\arraybackslash}m{3cm} |
        >{\centering\arraybackslash}m{3cm} |
        >{\centering\arraybackslash}m{1.5cm} |}
    \hline
    \rowcolor[gray]{0.9}
    Test & Input & Expected & Actual & Notes & Result\\
    \hline
    BB-1 & Piece moved while in beginner mode. & Game state is updated to reflect piece movement. & Game state updated correctly. &  & Pass \\
    \hline
    BB-2 & Piece picked up and held while in beginner mode. & LEDs on board indicate legal moves. & Correct LEDs light up. &  & Pass \\
    \hline
    BB-3 & Piece moved such that an illegal move is made while in beginner mode. & LEDs on board indicate illegal move. & Correct LEDs light up. & Not implemented, planned in future revisions. & TBD \\
    \hline
    BB-4 & Resign button is pressed while in beginner mode. & System variable `gameInProgress' set to false. & System variable configured correctly. &  & Pass \\
    \hline
    BB-5 & Draw button is pressed while in beginner mode. & System variable `gameInProgress' set to false. & System variable configured correctly. &  & Pass \\
    \hline
    BD-1 & Game state is updated while in beginner mode. & Updated game state is transmitted to the web application via Bluetooth. & Game state transmitted correctly. &  & Pass \\
    \hline
    \pagebreak 
    \hline
    \rowcolor[gray]{0.9}
    Test & Input & Expected & Actual & Notes & Result\\
    \hline
    BA-1 & User selcetions chess instructions in web application. & Web application displays detailed rules for how to play chess. & N/A & Not implemented, planned in future revisions. & TBD \\
    \hline
    BA-2 & Web application receives updated game state while in beginner mode. & Update to game state is reflected on web application display. & Display updates correctly. &  & Pass \\
    \hline
    \caption{Beginner Mode Functional Requirements Results}\\
\end{longtable}
    
\pagebreak

\section{Nonfunctional Requirements Evaluation}
Refer to the VnV Plan for descriptions of the tests derived to evaluate the non-functional requirements.

\subsection{Look and Feel}

\begin{table}[H]
\centering
    \setlength{\leftmargini}{0.4cm}
    \begin{tabular}{| >{\centering\arraybackslash}m{3cm} | 
      >{\centering\arraybackslash}m{4cm} | 
      >{\centering\arraybackslash}m{6cm} |}
    \hline
    \rowcolor[gray]{0.9}
    Test & Result & Notes\\
    \hline
    NFT-1 &  & \\
    \hline
    \end{tabular}
\caption{Look and Feel Non-Functional Requirements Results}
\end{table}
		
\subsection{Usability and Humanity}

\begin{table}[H]
\centering
    \setlength{\leftmargini}{0.4cm}
    \begin{tabular}{| >{\centering\arraybackslash}m{3cm} | 
      >{\centering\arraybackslash}m{4cm} | 
      >{\centering\arraybackslash}m{6cm} |}
    \hline
    \rowcolor[gray]{0.9}
    Test & Result & Notes\\
    \hline
    NFT-2 &  & \\
    \hline
    NFT-3 &  & \\
    \hline
    \end{tabular}
\caption{Usability and Humanity Non-Functional Requirements Results}
\end{table}

\subsection{Performance}

\begin{table}[H]
\centering
    \setlength{\leftmargini}{0.4cm}
    \begin{tabular}{| >{\centering\arraybackslash}m{3cm} | 
      >{\centering\arraybackslash}m{4cm} | 
      >{\centering\arraybackslash}m{6cm} |}
    \hline
    \rowcolor[gray]{0.9}
    Test & Result & Notes\\
    \hline
    NFT-4 &  & \\
    \hline
    NFT-5 &  & \\
    \hline
    NFT-6 &  & \\
    \hline
    NFT-7 &  & \\
    \hline
    \end{tabular}
\caption{Performance Non-Functional Requirements Results}
\end{table}

\subsection{Health and Safety}

\begin{table}[H]
\centering
    \setlength{\leftmargini}{0.4cm}
    \begin{tabular}{| >{\centering\arraybackslash}m{3cm} | 
      >{\centering\arraybackslash}m{4cm} | 
      >{\centering\arraybackslash}m{6cm} |}
    \hline
    \rowcolor[gray]{0.9}
    Test & Result & Notes\\
    \hline
    NFT-8 &  & \\
    \hline
    \end{tabular}
\caption{Health and Safety Non-Functional Requirements Results}
\end{table}

\subsection{Precision and Accuracy}

\begin{table}[H]
\centering
    \setlength{\leftmargini}{0.4cm}
    \begin{tabular}{| >{\centering\arraybackslash}m{3cm} | 
      >{\centering\arraybackslash}m{4cm} | 
      >{\centering\arraybackslash}m{6cm} |}
    \hline
    \rowcolor[gray]{0.9}
    Test & Result & Notes\\
    \hline
    NFT-9 &  & \\
    \hline
    \end{tabular}
\caption{Precision and Accuracy Non-Functional Requirements Results}
\end{table}

\subsection{Capacity}

\begin{table}[H]
\centering
    \setlength{\leftmargini}{0.4cm}
    \begin{tabular}{| >{\centering\arraybackslash}m{3cm} | 
      >{\centering\arraybackslash}m{4cm} | 
      >{\centering\arraybackslash}m{6cm} |}
    \hline
    \rowcolor[gray]{0.9}
    Test & Result & Notes\\
    \hline
    NFT-10 &  & \\
    \hline
    \end{tabular}
\caption{Capacity Non-Functional Requirements Results}
\end{table}

\subsection{Security}

\begin{table}[H]
\centering
    \setlength{\leftmargini}{0.4cm}
    \begin{tabular}{| >{\centering\arraybackslash}m{3cm} | 
      >{\centering\arraybackslash}m{4cm} | 
      >{\centering\arraybackslash}m{6cm} |}
    \hline
    \rowcolor[gray]{0.9}
    Test & Result & Notes\\
    \hline
    NFT-11 &  & \\
    \hline
    NFT-12 &  & \\
    \hline
    \end{tabular}
\caption{Security Non-Functional Requirements Results}
\end{table}

\section{Unit Testing}

\section{Changes Due to Testing}
The results detailed in the above tests prompted a number of design changes in 
the hardware, embedded and web application systems. Outlined below are the 
changes made as result. 

\subsection{Embedded Testing} 
Testing the finite state machine located in the electrical system resulted in 
incorrect functionality according to the design. A finite state machine was 
designed to control the functionality of the electrical system dictated by the
user. It allows users to change modes and have control over the performance 
of the board. The initial implementation of the FSM utilized a slow clock speed
and certain inputs were missed as a result. The new solution is to increase the
clock speed of the FSM and include buffers within the states to increase the
robustness of the system. 
\newline
\newline
Easy mode provides the functionality of possible moves for pieces on the board.
When a piece is lifted, the available squares are highlighted. During testing of 
the function, there were a number of edge cases that were not covered such as 
castling, en passant and check scenarios. The proposed solution was to increase
the robustness of the algorithm and maintain logs of the game to account for
these edge cases. 

\subsection{Hardware Testing}
Testing the hall sensor piece detection circuits at scale uncovered issues
with sensitivity of the sensors. At scales of four or more sensors in series, 
the sensitivity of the reading was too large. Initial solutions included 
improvement of the hardware. This included improvement of the power supply, 
grounding and sensors themselves. These solutions did not solve the issue. As 
a result, the requirements of the sensors have been changed to sense north and 
south poles exclusively. The functionality of individual piece detection was not
feasible. 
\newline
\newline
Assembly of the revision one chess board displayed issues with robustness of the
connections between mechanical and electrical assemblies. Temporary connection 
was established with electrical and duct tape. The electrical system suspended 
below the mechanical system. After testing of the board, connection points began 
to fail and separation occured. The solution for revision two is assembly of the
mechanical and electrical systems simultaneously. The two systems are assembled 
together and the robustness of the system is increased.

\subsection{Web Application Testing}
Integration of the web application with the embedded system revealed an error 
with the implementation of polling in the web application. Polling required 
handling of constant data transmission between systems. Issues were clear with 
required data and processing dedicated to this communicatin. One of the proposed
solutions is the implementation of a refresh to erase the stored data. This 
eliminates the data size issue. A second solution is the introduction of sockets
which eliminates polling entirely and solves the data size and processing issues. 


\section{Automated Testing}
		
\section{Trace to Requirements \& Modules}

\begin{longtable}{| p{.20\textwidth} | p{.4\textwidth} | p{.4\textwidth}|}
  \hline
  Test & Requirement & Module\\
  \hline
  GA-1 & GA1 & M2\\
  \hline
  GA-2 & GA2 & M2\\
  \hline
  GA-3 & GA3 & M2\\
  \hline
  GA-4 & GA6 & M2\\
  \hline
  GA-5 & GA7 & M2, M5, M11\\
  \hline
  GI-1 & GI1 & M2\\
  \hline
  GI-2 & GI2 & M2, M11\\
  \hline
  GI-3 & GI3 & M2\\
  \hline
  GI-4 & GI4 & M2, M4\\
  \hline
  GI-5 & GI5, GI6 & M2, M5, M11\\
  \hline
  NB-1 & NB1 & M2, M11\\
  \hline
  NB-2 & NB2 & M2, M11\\
  \hline
  NB-3 & NB3 & M2, M11\\
  \hline
  ND-1 & ND1 & M2, M11\\
  \hline
  NA-1 & NA1, NA2 & M2, M6, M8, M11\\
  \hline
  NA-2 & NA3 & M2, M5, M11\\
  \hline
  EB-1 & EB1 & M2, M5, M11\\
  \hline
  EB-2 & EB2 & M2, M11\\
  \hline
  EB-3 & EB3 & M2, M11\\
  \hline
  EB-4 & EB4 & M10, M14\\
  \hline
  ED-1 & ED1 & M5, M6, M8, M12\\
  \hline
  ED-2 & ED2 & M14\\
  \hline
  EA-1 & EA1, EA2 & M5, M6, M8, M11\\
  \hline
  EA-2 & EA3, EA4, EA5 & M14\\
  \hline
  EA-3 & EA6 & M5, M6, M8, M9\\
  \hline
  BB-1 & BB1 & M4, M5, M11\\
  \hline
  BB-2 & BB2 & M4, M5, M11\\
  \hline
  BB-3 & BB3 & M4, M5, M11\\
  \hline
  BB-4 & BB4 & M2, M5, M11\\
  \hline
  BB-5 & BB5 & M2, M5, M11\\
  \hline
  BD-1 & BD1 &  M2, M5, M11\\
  \hline
  BA-1 & BA1 &\\
  \hline
  BA-2 & BA2 &\\
  \hline
  NFT1 & LF3 &\\
  \hline
  NFT2 & UH5 &\\
  \hline
  NFT3 & UH6 &\\
  \hline
  NFT4 & PR1 &\\
  \hline
  NFT5 & PR2 &\\
  \hline
  NFT6 & PR3 &\\
  \hline
  NFT7 & PR4 &\\
  \hline
  NFT8 & PR6 &\\
  \hline
  NFT9 & PR7 &\\
  \hline
  NFT10 & PR10 &\\
  \hline
  NFT11 & SR4 &\\
  \hline
  NFT12 & SR3 &\\
  \hline
\caption{Requirements Traceability Matrix}
\end{longtable}
		
\section{Trace to Modules}		

\section{Code Coverage Metrics}

\appendix
\section{Reflection Appendix}


\bibliographystyle{plainnat}

\nocite{*}\bibliography{../../refs/References}

\end{document}